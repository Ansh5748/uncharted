{"version":3,"file":"bezier.js","sourceRoot":"","sources":["../../../../../dev/addons/src/lottie/maths/bezier.ts"],"names":[],"mappings":"AAAA;;;;;GAKG;AACH,MAAM,OAAO,WAAW;IAwBpB;;;;;;;;OAQG;IACH,YAAY,KAAa,CAAC,EAAE,KAAa,CAAC,EAAE,KAAa,CAAC,EAAE,KAAa,CAAC,EAAE,WAAmB;QAC3F,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC;QACb,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAEhC,6BAA6B;QAC7B,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;QACzC,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;QACrC,IAAI,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;IAC3B,CAAC;IAED;;;;OAIG;IACI,WAAW,CAAC,CAAS;QACxB,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;YACV,OAAO,CAAC,CAAC;QACb,CAAC;QAED,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;YACV,OAAO,CAAC,CAAC;QACb,CAAC;QAED,IAAI,QAAQ,GAAG,CAAC,CAAC;QAEjB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC,EAAE,EAAE,CAAC;YACzC,MAAM,SAAS,GAAG,QAAQ,GAAG,QAAQ,CAAC;YACtC,MAAM,SAAS,GAAG,SAAS,GAAG,QAAQ,CAAC;YACvC,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,GAAG,SAAS,GAAG,IAAI,CAAC,GAAG,GAAG,SAAS,GAAG,IAAI,CAAC,GAAG,GAAG,QAAQ,CAAC;YAC5E,MAAM,KAAK,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;YACxF,QAAQ,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;YAC5B,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC;QAClD,CAAC;QAED,uCAAuC;QACvC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,QAAQ,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,QAAQ,CAAC,GAAG,QAAQ,GAAG,QAAQ,GAAG,IAAI,CAAC,EAAE,GAAG,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC;IAC1J,CAAC;CACJ","sourcesContent":["/**\r\n * Represents a Babylon.js thin version of a cubic bezier curve\r\n * We are only exposing what we truly need in the scope of\r\n * the Lottie Renderer project preventing the dependency on the full\r\n * Babylon.js animation system.\r\n */\r\nexport class BezierCurve {\r\n    /**\r\n     * X of the first control point\r\n     */\r\n    public readonly x1: number;\r\n    /**\r\n     * Y of the first control point\r\n     */\r\n    public readonly y1: number;\r\n    /**\r\n     * X of the second control point\r\n     */\r\n    public readonly x2: number;\r\n    /**\r\n     * Y of the second control point\r\n     */\r\n    public readonly y2: number;\r\n\r\n    private readonly _easingSteps: number;\r\n\r\n    private readonly _f0: number;\r\n    private readonly _f1: number;\r\n    private readonly _f2: number;\r\n\r\n    /**\r\n     * Instantiates a bezier function\r\n     * @see http://cubic-bezier.com/#.17,.67,.83,.67\r\n     * @param x1 Defines the x component of the start tangent in the bezier curve\r\n     * @param y1 Defines the y component of the start tangent in the bezier curve\r\n     * @param x2 Defines the x component of the end tangent in the bezier curve\r\n     * @param y2 Defines the y component of the end tangent in the bezier curve\r\n     * @param easingSteps Number of steps to sample the bezier curve for easing\r\n     */\r\n    constructor(x1: number = 0, y1: number = 0, x2: number = 1, y2: number = 1, easingSteps: number) {\r\n        this.x1 = x1;\r\n        this.y1 = y1;\r\n        this.x2 = x2;\r\n        this.y2 = y2;\r\n        this._easingSteps = easingSteps;\r\n\r\n        // Pre-calculate coefficients\r\n        this._f0 = 1 - 3 * this.x2 + 3 * this.x1;\r\n        this._f1 = 3 * this.x2 - 6 * this.x1;\r\n        this._f2 = 3 * this.x1;\r\n    }\r\n\r\n    /**\r\n     * Interpolates the bezier curve at a given time\r\n     * @param t Defines the time to evaluate the bezier curve at, between 0 and 1\r\n     * @returns The interpolated value at time t\r\n     */\r\n    public interpolate(t: number): number {\r\n        if (t === 0) {\r\n            return 0;\r\n        }\r\n\r\n        if (t === 1) {\r\n            return 1;\r\n        }\r\n\r\n        let refinedT = t;\r\n\r\n        for (let i = 0; i < this._easingSteps; i++) {\r\n            const refinedT2 = refinedT * refinedT;\r\n            const refinedT3 = refinedT2 * refinedT;\r\n            const x = this._f0 * refinedT3 + this._f1 * refinedT2 + this._f2 * refinedT;\r\n            const slope = 1.0 / (3.0 * this._f0 * refinedT2 + 2.0 * this._f1 * refinedT + this._f2);\r\n            refinedT -= (x - t) * slope;\r\n            refinedT = Math.min(1, Math.max(0, refinedT));\r\n        }\r\n\r\n        // Resolve cubic bezier for the given x\r\n        return 3 * (1 - refinedT) * (1 - refinedT) * refinedT * this.y1 + 3 * (1 - refinedT) * refinedT * refinedT * this.y2 + refinedT * refinedT * refinedT;\r\n    }\r\n}\r\n"]}